(()=>{"use strict";var e,l={505(){const e=window.wp.blocks,l=window.wp.i18n,a=window.wp.blockEditor,s=window.wp.components,t=window.ReactJSXRuntime,r=[{key:"strength",label:"STR",name:"Strength",color:"#e74c3c",icon:"ðŸ’ª",tooltip:"Content engagement power"},{key:"wisdom",label:"WIS",name:"Wisdom",color:"#9b59b6",icon:"ðŸ§ ",tooltip:"Site knowledge depth"},{key:"charisma",label:"CHA",name:"Charisma",color:"#e91e63",icon:"âœ¨",tooltip:"Social appeal"},{key:"stamina",label:"STA",name:"Stamina",color:"#27ae60",icon:"ðŸ›¡ï¸",tooltip:"Site uptime resilience"},{key:"agility",label:"AGI",name:"Agility",color:"#3498db",icon:"âš¡",tooltip:"Page load speed"},{key:"intelligence",label:"INT",name:"Intelligence",color:"#f39c12",icon:"ðŸ“š",tooltip:"Content quality"}],i={1:"Newcomer",2:"Adventurer",3:"Explorer",4:"Champion",5:"Hero",6:"Legend",7:"Master",8:"Grandmaster",9:"Mythic",10:"Immortal"},o=[{label:"Level 2",value:2},{label:"Level 3",value:3},{label:"Level 4",value:4},{label:"Level 5",value:5},{label:"Level 6",value:6},{label:"Level 7",value:7},{label:"Level 8",value:8},{label:"Level 9",value:9},{label:"Level 10",value:10}],c=JSON.parse('{"UU":"site-rpg/character-card"}'),n=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.18l6.9 3.45L12 11.09 5.1 7.63 12 4.18zM4 8.82l7 3.5v7.36l-7-3.5V8.82zm9 10.86v-7.36l7-3.5v7.36l-7 3.5z"})});(0,e.registerBlockType)(c.UU,{icon:n,edit:function({attributes:e,setAttributes:c}){const{siteName:n,showMiniGame:d,cardStyle:p,couponEnabled:g,couponCode:_,couponMessage:v,levelCoupons:h=[]}=e,m=(e,l,a)=>{const s=h.map((s,t)=>t===e?{...s,[l]:a}:s);c({levelCoupons:s})},b=(0,a.useBlockProps)({className:"site-rpg-block"}),x=window.siteRpgData?.siteData||{level:1,xp:0,xpToNextLevel:100,stats:{strength:10,wisdom:8,charisma:5,stamina:12,agility:7,intelligence:9}},u=x.xp/x.xpToNextLevel*100;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.InspectorControls,{children:[(0,t.jsxs)(s.PanelBody,{title:(0,l.__)("Settings","site-rpg-block"),children:[(0,t.jsx)(s.TextControl,{label:(0,l.__)("Site Name","site-rpg-block"),value:n,onChange:e=>c({siteName:e}),placeholder:(0,l.__)("My Awesome Site","site-rpg-block")}),(0,t.jsx)(s.SelectControl,{label:(0,l.__)("Card Style","site-rpg-block"),value:p,options:[{label:"Classic RPG",value:"classic"},{label:"Pixel Art",value:"pixel"},{label:"Modern",value:"modern"}],onChange:e=>c({cardStyle:e})}),(0,t.jsx)(s.ToggleControl,{label:(0,l.__)("Show Mini-Game","site-rpg-block"),checked:d,onChange:e=>c({showMiniGame:e}),help:(0,l.__)("Allow visitors to play Hack & Slash to earn XP for your site.","site-rpg-block")})]}),(0,t.jsxs)(s.PanelBody,{title:(0,l.__)("Coupon Reward","site-rpg-block"),initialOpen:!1,children:[(0,t.jsx)(s.ToggleControl,{label:(0,l.__)("Enable Coupon Reward","site-rpg-block"),checked:g,onChange:e=>c({couponEnabled:e}),help:(0,l.__)("Reward first-time players with a coupon code.","site-rpg-block")}),g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.TextControl,{label:(0,l.__)("Coupon Code","site-rpg-block"),value:_,onChange:e=>c({couponCode:e}),placeholder:(0,l.__)("SAVE20","site-rpg-block"),help:(0,l.__)("The code to reveal after playing.","site-rpg-block")}),(0,t.jsx)(s.TextControl,{label:(0,l.__)("Reward Message","site-rpg-block"),value:v,onChange:e=>c({couponMessage:e}),placeholder:(0,l.__)("Congratulations! Here's your reward:","site-rpg-block")})]})]}),(0,t.jsxs)(s.PanelBody,{title:(0,l.__)("Level Rewards","site-rpg-block"),initialOpen:!1,children:[(0,t.jsx)("p",{className:"components-base-control__help",style:{marginTop:0},children:(0,l.__)("Configure coupons that unlock when users reach specific levels.","site-rpg-block")}),h.map((e,a)=>(0,t.jsx)(s.Card,{className:"site-rpg-level-coupon-card",style:{marginBottom:"12px"},children:(0,t.jsxs)(s.CardBody,{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,t.jsxs)("strong",{children:[(0,l.__)("Level","site-rpg-block")," ",e.level," ",(0,l.__)("Reward","site-rpg-block")]}),(0,t.jsx)(s.Button,{icon:"trash",label:(0,l.__)("Remove","site-rpg-block"),onClick:()=>(e=>{c({levelCoupons:h.filter((l,a)=>a!==e)})})(a),isDestructive:!0,size:"small"})]}),(0,t.jsx)(s.SelectControl,{label:(0,l.__)("Unlock Level","site-rpg-block"),value:e.level,options:o,onChange:e=>m(a,"level",parseInt(e,10))}),(0,t.jsx)(s.TextControl,{label:(0,l.__)("Coupon Code","site-rpg-block"),value:e.code,onChange:e=>m(a,"code",e),placeholder:(0,l.__)("LEVEL5","site-rpg-block")}),(0,t.jsx)(s.TextControl,{label:(0,l.__)("Reward Message","site-rpg-block"),value:e.message,onChange:e=>m(a,"message",e),placeholder:(0,l.__)("Congratulations! You unlocked a reward:","site-rpg-block")})]})},a)),(0,t.jsx)(s.Button,{variant:"secondary",onClick:()=>{const e=h.map(e=>e.level),a=[2,3,4,5,6,7,8,9,10].find(l=>!e.includes(l))||2;c({levelCoupons:[...h,{level:a,code:"",message:(0,l.__)("Congratulations! You unlocked a reward:","site-rpg-block"),icon:"ðŸŽ"}]})},disabled:h.length>=9,style:{marginTop:"8px"},children:(0,l.__)("+ Add Level Reward","site-rpg-block")})]})]}),(0,t.jsx)("div",{...b,children:(0,t.jsxs)("div",{className:`site-rpg-card site-rpg-card--${p}`,children:[(0,t.jsxs)("div",{className:"site-rpg-card__header",children:[(0,t.jsxs)("div",{className:"site-rpg-card__avatar-container",children:[(0,t.jsxs)("div",{className:"site-rpg-card__avatar",children:[(0,t.jsx)("div",{className:"site-rpg-card__avatar-ring"}),(0,t.jsx)("div",{className:"site-rpg-card__avatar-icon",children:"ðŸ°"}),(0,t.jsx)("div",{className:"site-rpg-card__avatar-level",children:x.level})]}),(0,t.jsx)("div",{className:"site-rpg-card__avatar-particles"})]}),(0,t.jsxs)("div",{className:"site-rpg-card__info",children:[(0,t.jsx)("h3",{className:"site-rpg-card__name",children:n||(0,l.__)("Your Site","site-rpg-block")}),(0,t.jsxs)("div",{className:"site-rpg-card__level",children:[(0,t.jsxs)("span",{className:"site-rpg-card__level-badge",children:["Level ",x.level]}),(0,t.jsx)("span",{className:"site-rpg-card__level-title",children:i[x.level]||"Adventurer"})]})]})]}),(0,t.jsxs)("div",{className:"site-rpg-card__xp",children:[(0,t.jsxs)("div",{className:"site-rpg-card__xp-label",children:[(0,t.jsx)("span",{children:"XP"}),(0,t.jsxs)("span",{children:[x.xp," / ",x.xpToNextLevel]})]}),(0,t.jsx)("div",{className:"site-rpg-card__xp-bar",children:(0,t.jsx)("div",{className:"site-rpg-card__xp-fill",style:{width:`${u}%`}})})]}),(0,t.jsx)("div",{className:"site-rpg-card__stats",children:r.map(e=>(0,t.jsxs)("div",{className:"site-rpg-card__stat","data-stat":e.key,"data-value":x.stats[e.key],children:[(0,t.jsx)("div",{className:"site-rpg-card__stat-icon",style:{backgroundColor:`${e.color}20`},children:(0,t.jsx)("span",{className:"site-rpg-card__stat-emoji",children:e.icon})}),(0,t.jsxs)("div",{className:"site-rpg-card__stat-content",children:[(0,t.jsxs)("div",{className:"site-rpg-card__stat-header",children:[(0,t.jsx)("span",{className:"site-rpg-card__stat-label",style:{color:e.color},children:e.label}),(0,t.jsxs)("span",{className:"site-rpg-card__stat-value",children:[x.stats[e.key],(0,t.jsx)("span",{className:"site-rpg-card__stat-max",children:"/20"})]})]}),(0,t.jsxs)("div",{className:"site-rpg-card__stat-bar",children:[(0,t.jsx)("div",{className:"site-rpg-card__stat-fill",style:{width:`${Math.min(5*x.stats[e.key],100)}%`,backgroundColor:e.color}}),(0,t.jsx)("div",{className:"site-rpg-card__stat-glow"})]})]}),(0,t.jsxs)("div",{className:"site-rpg-card__stat-tooltip",children:[(0,t.jsx)("span",{className:"site-rpg-card__stat-tooltip-title",children:e.name}),(0,t.jsx)("span",{className:"site-rpg-card__stat-tooltip-desc",children:e.tooltip})]})]},e.key))}),d&&(0,t.jsxs)("div",{className:"site-rpg-card__game",children:[(0,t.jsxs)("button",{className:"site-rpg-card__game-btn",disabled:!0,children:["âš”ï¸ ",(0,l.__)("Defend the Site!","site-rpg-block")]}),(0,t.jsx)("p",{className:"site-rpg-card__game-hint",children:(0,l.__)("Visitors can play to help you level up!","site-rpg-block")})]})]})})]})},save:function({attributes:e}){const{siteName:l,showMiniGame:s,cardStyle:r}=e,i=a.useBlockProps.save({className:"site-rpg-block"});return(0,t.jsx)("div",{...i,"data-site-name":l,"data-show-mini-game":s,"data-card-style":r})}})}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return l[e](r,r.exports,s),r.exports}s.m=l,e=[],s.O=(l,a,t,r)=>{if(!a){var i=1/0;for(d=0;d<e.length;d++){for(var[a,t,r]=e[d],o=!0,c=0;c<a.length;c++)(!1&r||i>=r)&&Object.keys(s.O).every(e=>s.O[e](a[c]))?a.splice(c--,1):(o=!1,r<i&&(i=r));if(o){e.splice(d--,1);var n=t();void 0!==n&&(l=n)}}return l}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,t,r]},s.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={306:0,662:0};s.O.j=l=>0===e[l];var l=(l,a)=>{var t,r,[i,o,c]=a,n=0;if(i.some(l=>0!==e[l])){for(t in o)s.o(o,t)&&(s.m[t]=o[t]);if(c)var d=c(s)}for(l&&l(a);n<i.length;n++)r=i[n],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=globalThis.webpackChunksite_rpg_block=globalThis.webpackChunksite_rpg_block||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))})();var t=s.O(void 0,[662],()=>s(505));t=s.O(t)})();